!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/assets/js",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){for(var o=0;o<n.length;o++){var r=n[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(i=r.key,a=void 0,a=function(t,n){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,n||"default");if("object"!==e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(i,"string"),"symbol"===e(a)?a:String(a)),r)}var i,a}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var i=r((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.env=n(3).default,this.utils=n(4).default,this.classes={Cart:n(5).default},this.components={},this.helpers={},this.modules={},document.addEventListener("DOMContentLoaded",(function(){document.documentElement.classList.remove("_loading")}))}));t.ProjectApp=new i,console.log(t.ProjectApp),window.addEventListener("DOMContentLoaded",(function(){(new t.ProjectApp.classes.Cart).init();var e=document.querySelector(".header__toggle-cart"),n=document.querySelector(".cart-right-side");e.addEventListener("click",(function(){n.classList.toggle("opened")}))}))}).call(this,n(2))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e);var o=window.environmentObject,r={isMobile:"_mobile"===o.platform,isDesktop:"_desktop"===o.platform,isMac:"_mac"===o.os,isWin:"_win"===o.os,isLinux:"_linux"===o.os,isAndroid:"_android"===o.os,isIOS:"_ios"===o.os,isFF:"_ff"===o.browser,isOpera:"_opera"===o.browser,isYandex:"_yandex"===o.browser,isIE:"_ie"===o.browser,isEdge:"_edge"===o.browser,isChrome:"_chrome"===o.browser,isSafari:"_safari"===o.browser,isLocal:o.isLocal};window.environmentObject=null,delete window.environmentObject,e.default=r},function(t,e,n){"use strict";n.r(e);var o={now:function(){return window.performance&&window.performance.now?this.now=function(){return window.performance.now()}:this.now=function(){return+new Date},this.now()},cubicProgress:function(t){return t=(t=t<0?0:t)>1?1:t,(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},debounce:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var r=this,i=arguments,a=function(){e=null,!o&&t.apply(r,i)},u=o&&!e;clearTimeout(e),e=setTimeout(a,n),u&&t.apply(r,i)}},throttle:function(t){var e,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=!1;function i(){r?(e=arguments,n=this):(t.apply(this,arguments),r=!0,setTimeout((function(){r=!1,e&&(i.apply(n,e),e=n=null)}),o))}return i},formatNumber:function(t){for(var e="",n=(t=t.toString()).length-1,o=0;n>=0;n--,o++)3===o?(o=0,e=t.substr(n,1)+" "+e):e=t.substr(n,1)+e;return e},declOfNum:function(t,e){return e[t%100>4&&t%100<20?2:[2,0,1,1,1,2][t%10<5?t%10:5]]}};e.default=o},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,l(o.key),o)}}function u(t,e,n){return(e=l(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){var e=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o(e)?e:String(e)}n.r(e);var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"goodsData",[]),u(this,"goods",[]),u(this,"reCalculate",new Event("reCalculate")),u(this,"calculateData",{subTotal:0,tax:100,shipping:150,total:0}),u(this,"timeOut",null),this.setGoods(),this.addListeners(),this.setGoodsData(),this.subTotal=document.querySelector('[data-name="subtotal"] .cart-total__value span'),this.tax=document.querySelector('[data-name="tax"] .cart-total__value span'),this.shipping=document.querySelector('[data-name="shipping"] .cart-total__value span'),this.total=document.querySelector('[data-name="total"] .cart-total__value span'),this.headerCountNode=document.querySelector(".header__goods-count")}var e,n,o;return e=t,(n=[{key:"setGoods",value:function(){this.goods=r(document.querySelectorAll(".goods-item"))}},{key:"addListeners",value:function(){var t=this;this.goods.forEach((function(e){t.setCountHandlers(e),t.setRemoveHandler(e),t.setInputHandler(e)}))}},{key:"setGoodsData",value:function(){this.goodsData=[];var t=this.goods.map((function(t){return t.querySelector("[data-price]").getAttribute("data-price")})),e=this.goods.map((function(t){return t.querySelector("[data-name='count']").value}));for(var n in this.goods)this.goodsData.push({count:e[n],price:t[n]})}},{key:"setInputHandler",value:function(t){var e,n=this;null===(e=t.querySelector('input[data-name="count"]'))||void 0===e||e.addEventListener("input",(function(t){var e=t.target;e.value=e.value.replace(/\D/,""),n.timeOut&&clearTimeout(n.timeOut),n.timeOut=setTimeout((function(){n.setGoodsData(),n.fireReCalculateEvent()}),1e3)}))}},{key:"setRemoveHandler",value:function(t){var e,n=this;null===(e=t.querySelector(".goods-item__remove"))||void 0===e||e.addEventListener("click",(function(t){t.target.closest(".goods-item").remove(),n.setGoods(),n.fireReCalculateEvent()}),{once:!0})}},{key:"setCountHandlers",value:function(t){var e=this,n=t.querySelector(".goods-item__inc"),o=t.querySelector(".goods-item__dec"),r=t.querySelector('input[data-name="count"]');n.addEventListener("click",(function(){r.value++,e.fireReCalculateEvent()})),o.addEventListener("click",(function(){r.value--,r.value=Math.max(+r.value--,1),e.fireReCalculateEvent()}))}},{key:"fireReCalculateEvent",value:function(){document.dispatchEvent(this.reCalculate)}},{key:"calculate",value:function(){var t=this;this.setGoodsData(),this.calculateData.subTotal=0,this.goodsData.forEach((function(e){t.calculateData.subTotal+=e.count*e.price})),this.calculateData.total=this.calculateData.tax+this.calculateData.shipping+this.calculateData.subTotal,this.setValues(),this.headerCountNode.textContent=this.goods.length}},{key:"setValues",value:function(){this.tax.textContent=this.calculateData.tax,this.shipping.textContent=this.calculateData.shipping,this.subTotal.textContent=this.calculateData.subTotal,this.total.textContent=this.calculateData.total}},{key:"init",value:function(){this.calculate(),this.calculateBind=this.calculate.bind(this),document.addEventListener("reCalculate",this.calculateBind)}}])&&a(e.prototype,n),o&&a(e,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.default=c}]);